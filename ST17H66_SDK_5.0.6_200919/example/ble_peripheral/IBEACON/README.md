# 公版Becon设备App协议
本协议用于App更改Becon设备参数：设备名、广播包UUID、Major、Minor、RSSI值和广播包间隔。


## 服务
```
Service UUID   :  0xFFF0

Charactre UUID :  0xFFF1
Properties     :  WRITE

Character UUID :  0xFFF2
Properties     :  NOTIFY,READ
```

## 数据格式

1. App下发数据格式

|   `名称`    |   `SOP`   |   `LEN`   |   `CMD`   |   `DATA`  |   `SUM`   |
|:--------:|:---------:|:---------:|:---------:|:---------:|:---------:|
| 描述 | 命令头 `0xee`   |   DATA长度 | 命令字节   | 有效数据   | SOP到DATA 和校验|
| 长度（字节） | 1  |   1   |   1   |   不定    |   1   |
|             |    |       |       |           |        |           


|   `CMD` |   `命令` |
|:--------:|:---------:|
|   0x11    | 更改设备名 |
|   0x12    | 更改UUID  |
|   0X13    | 更改Major |
|   0x14    | 更改Minor |
|   0x15    | 更改RSSI  |
|   0x16    | 更改广播包间隔|
|           |              |


2. 返回数据格式

|   `名称`  |   `SOP`   | `CMD`   |   `STATE` |
|:--------:|:---------:|:---------:|:---------:|
|   描述  |     数据头`0x66` |  命令  |     0x00:配置失败  0x01:配置成功  0x02:格式错误  0x03:校验错误 |
|   长度  |   1    |    1   |   1   |
|        |         |       |        |


## 具体命令说明

1. `更改设备名`

    写入的名称长度不能大于8（仅支持字母、数字和下划线）。

> 0xEE 03 11 `41 42 43` C8  
> 表示将设备名修改为`"ABC"`

2. `更改UUID`  
   
   长度为16字节的UUID。

> 0xEE 10 12 `10 11 12 13 14 15 16 17 20 21 22 23 24 25 26 27` C8  
> 将32位UUID更改为`0x10111213141516172021222324252627`

3. `更改Major`
   
   长度为2个字节。

> 0xEE 02 13 `00 64` 67  
> 将Major 更改为`100`

4. `更改Minor`
   
   长度为2个字节。

> 0xEE 02 14 `00 32` 36  
> 将Minor 更改为`50`

5. `更改RSSI值`
   
   长度为1个字节。  
   
   `注意`：设置的值需要转换，例如需要设置RSSI值为`-48dB`，设置的值为`(48  --> 0x30)`，完整命令如下。

> 0xEE 01 15 `30` 34  
> 将RSSI值设置为`-48dB`

6. `设置广播包间隔`
   
   长度为2个字节。广播包间隔 = （DATA[1]*0x0100 + DATA[0]）ms

> 0xEE 02 16 `E8 03` F1  
> 设置广播包间隔为`1S`
